(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),u=n(2),l=n(3),i=n.n(l),s="/api/persons",d=function(){return i.a.get(s)},m=function(e){return i.a.post(s,e)},f=function(e){return i.a.delete("".concat(s,"/").concat(e))},p=function(e,t){return i.a.put("".concat(s,"/").concat(e),t)},b=function(e){var t=e.content,n=e.error,c=Object(a.useState)(!1),o=Object(u.a)(c,2),l=o[0],i=o[1];Object(a.useEffect)((function(){t&&(i(!0),setTimeout((function(){i(!1)}),5e3))}),[t]);var s={display:l?"block":"none",color:n?"red":"green",border:n?"2px solid red":"2px solid green",borderRadius:"5px",padding:"5px",fontSize:"large",fontWeight:"bold",backgroundColor:"lightgray"};return r.a.createElement("p",{style:s},t)},h=function(e){var t=e.search,n=e.setSearch;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Search"),"Person name incudes ",r.a.createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)}}))},E=function(e){var t=e.addPerson,n=e.newName,a=e.setNewName,c=e.newNumber,o=e.setNewNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add person"),r.a.createElement("form",{onSubmit:function(e){return t(e)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{type:"text",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},v=function(e){var t=e.person,n=e.removePerson;return r.a.createElement("div",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:function(){return n(t)}},"delete"))},g=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(u.a)(o,2),i=l[0],s=l[1],g=Object(a.useState)(""),w=Object(u.a)(g,2),j=w[0],O=w[1],y=Object(a.useState)(""),N=Object(u.a)(y,2),S=N[0],k=N[1],x=Object(a.useState)(""),C=Object(u.a)(x,2),P=C[0],A=C[1],F=Object(a.useState)(!1),J=Object(u.a)(F,2),L=J[0],z=J[1];Object(a.useEffect)((function(){d().then((function(e){return s(e.data)})).catch((function(e){return console.log(e)}))}),[]);var B=function(e){window.confirm("Are you sure you want to remove user: ".concat(e.name,"?"))&&f(e.id).then((function(){s(i.filter((function(t){return t.id!==e.id}))),A("".concat(e.name," deleted")),z(!1)})).catch((function(t){404===t.response.status?(A(t.response.data),s(i.filter((function(t){return t.id!==e.id})))):A(t.response.data),z(!0)}))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(b,{content:P,error:L}),r.a.createElement(h,{search:n,setSearch:c}),r.a.createElement(E,{addPerson:function(e){e.preventDefault();var t={name:j,number:S},n=i.find((function(e){return e.name===j}));n&&window.confirm("".concat(j," is already added to phonebook, do you want to update phone number?"))?p(n.id,t).then((function(e){s(i.map((function(t){return t.id!==n.id?t:e.data}))),A("".concat(t.name," updated")),z(!1)})).catch((function(e){console.log(e),z(!0),A(e.response.data)})):m(t).then((function(e){s(i.concat(e.data)),A("".concat(t.name," added")),z(!1)})).catch((function(e){A(e.response.data),z(!0)})),O(""),k("")},newName:j,setNewName:O,newNumber:S,setNewNumber:k}),r.a.createElement("h2",null,"Numbers"),i.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(v,{key:e.name,person:e,removePerson:B})})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.ae50dd99.chunk.js.map