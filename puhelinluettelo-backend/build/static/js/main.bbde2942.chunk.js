(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=n(2),l=n(3),i=n.n(l),m="http://localhost:3001/api/persons",s=function(){return i.a.get(m)},d=function(e){return i.a.post(m,e)},f=function(e){return i.a.delete("".concat(m,"/").concat(e))},p=function(e,t){return i.a.put("".concat(m,"/").concat(e),t)},b=function(e){var t=e.content,n=e.error,o=Object(a.useState)(!1),c=Object(u.a)(o,2),l=c[0],i=c[1];Object(a.useEffect)((function(){t&&(i(!0),setTimeout((function(){i(!1)}),5e3))}),[t]);var m={display:l?"block":"none",color:n?"red":"green",border:n?"2px solid red":"2px solid green",borderRadius:"5px",padding:"5px",fontSize:"large",fontWeight:"bold",backgroundColor:"lightgray"};return r.a.createElement("p",{style:m},t)},h=function(e){var t=e.search,n=e.setSearch;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Search"),"Person name incudes ",r.a.createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)}}))},g=function(e){var t=e.addPerson,n=e.newName,a=e.setNewName,o=e.newNumber,c=e.setNewNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add person"),r.a.createElement("form",{onSubmit:function(e){return t(e)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{type:"text",value:o,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},w=function(e){var t=e.person,n=e.removePerson;return r.a.createElement("div",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:function(){return n(t)}},"delete"))},v=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),l=Object(u.a)(c,2),i=l[0],m=l[1],v=Object(a.useState)(""),E=Object(u.a)(v,2),j=E[0],O=E[1],S=Object(a.useState)(""),y=Object(u.a)(S,2),N=y[0],k=y[1],x=Object(a.useState)(""),P=Object(u.a)(x,2),C=P[0],A=P[1],F=Object(a.useState)(!1),J=Object(u.a)(F,2),L=J[0],z=J[1];Object(a.useEffect)((function(){s().then((function(e){return m(e.data)})).catch((function(e){return console.log(e)}))}),[]);var B=function(e){window.confirm("Are you sure you want to remove user: ".concat(e.name,"?"))&&f(e.id).then((function(){m(i.filter((function(t){return t.id!==e.id}))),A("".concat(e.name," deleted")),z(!1)})).catch((function(t){404===t.response.status?(A("Person ".concat(e.name," has already been removed")),m(i.filter((function(t){return t.id!==e.id})))):A("Something went wrong when removing person"),z(!0)}))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(b,{content:C,error:L}),r.a.createElement(h,{search:n,setSearch:o}),r.a.createElement(g,{addPerson:function(e){e.preventDefault();var t={name:j,number:N},n=i.find((function(e){return e.name===j}));n&&window.confirm("".concat(j," is already added to phonebook, do you want to update phone number?"))?p(n.id,t).then((function(e){m(i.map((function(t){return t.id!==n.id?t:e.data}))),A("".concat(t.name," updated")),z(!1)})).catch((function(e){console.log(e),z(!0),404===e.response.status?A("Person ".concat(n.name," has already been removed")):A("Something went wrong when updating person")})):d(t).then((function(e){m(i.concat(e.data)),A("".concat(t.name," added")),z(!1)})).catch((function(e){A("Something went wrong when adding new person"),z(!0)})),O(""),k("")},newName:j,setNewName:O,newNumber:N,setNewNumber:k}),r.a.createElement("h2",null,"Numbers"),i.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(w,{key:e.name,person:e,removePerson:B})})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.bbde2942.chunk.js.map